{% extends 'backendbase.html.twig' %}

{% block title %}Project List{% endblock %}

{% block body %}
<div class="container mt-5">

    <h1>Project List</h1>

    <a href="{{ path('app_project_newb') }}" class="btn btn-primary mb-3">Create New Project</a>
           {# Formulaire de recherche #}
        <form action="{{ path('app_project_list') }}" method="get" class="form-inline mb-3">
            <div class="form-group">
                <input type="text" name="q" class="form-control" placeholder="Search by name...">
            </div>
            <button type="submit" class="btn btn-primary ml-2">Search</button>
        </form>


    <div id="project-list"> <!-- Conteneur pour la liste des projets -->
        {% if projects|length > 0 %}
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Title</th>
                        <th scope="col">Description</th>
                        <th scope="col">Category</th>
                        <th scope="col">File</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for project in projects %}
                        <tr>
                            <td>{{ project.id }}</td>
                            <td>{{ project.title }}</td>
                            <td>{{ project.description }}</td>
                            <td>
                                {% if project.Categories %}
                                    {{ project.Categories.name }}
                                {% else %}
                                    No category
                                {% endif %}
                            </td>
                            <td>
                                {% if project.projetFich %}
                                    {{ project.projetFich }}
                                {% else %}
                                    No file
                                {% endif %}
                            </td>
                            <td>
                                <a href="{{ path('app_project_showb', {'id': project.id}) }}" class="btn btn-info btn-sm">Show</a>
                                <a href="{{ path('app_project_editb', {'id': project.id}) }}" class="btn btn-warning btn-sm">Edit</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <div class="alert alert-info" role="alert">
                No projects found.
            </div>
        {% endif %}
        {{ knp_pagination_render(projects) }}
    </div>
</div>
</div>
<style>
   span{margin: 0;padding: 0;}
        .pagination {
            display: flex;
            justify-content: center;
            list-style-type: none;
            padding: 0;
            gap:.25em;
        }

        .pagination li {
            margin: 0 5px;
        }

        .pagination a {
            text-decoration: none;
            color: #007bff;
            border: 1px solid #007bff;
            padding: 6px 12px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }

        .pagination a:hover {
            background-color: #007bff;
            color: #fff;
        }

        .pagination .current {
            font-weight: bold;
            background-color: #007bff;
            color: #fff;
            border: 1px solid #007bff;
            padding: 6px 12px;
            border-radius: 4px;
            margin-top: -7px;            }
</style>
{% endblock %}
